@using vms.Utility
@using vms.entity.viewModels
@{
    var session = Context.Session.GetComplexData<vms.entity.viewModels.vmSession>("session");
}<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - vms</title>
    @*<environment include="Development">*@
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />

    <link href="~/css/GlobalMandatory.css" rel="stylesheet" />

    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="~/css/ThemeLayout.css" rel="stylesheet" />

    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="~/favicon.ico" />

</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">

    <div class="page-wrapper">
    </div>


    <partial name="_HeaderPartial" />
    <div class="clearfix"> </div>
    <div class="page-container">
        <!-- BEGIN SIDEBAR -->
        <div class="page-sidebar-wrapper">
            @if (UserRole.Check(FeatureList.IS_NBR_USER, session.Rights) && session.OrganizationId != 0)
            {
                <partial name="_LeftPanelPartial" />

            }
            else
            {<div class="page-sidebar navbar-collapse collapse">
        <ul class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">

        <li class="nav-item start">
            <a href="@Url.Action("Index", "Organizations")" class="nav-link nav-toggle">
                <i class="icon-home"></i>
                <span class="title">Company List</span>
                @*<span class="selected"></span>*@
                @*<span class="arrow open"></span>*@
            </a>
            </li>
         </ul>
</div>
    }
</div>



        <!-- END SIDEBAR -->
        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <!-- BEGIN PAGE HEADER-->
                <!-- BEGIN PAGE BAR -->

                <div class="page-bar">
                    @RenderSection("breadcrumb", required: false)

                    <div class="page-toolbar">
                        @*<div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom" data-original-title="Change dashboard date range">
                                <i class="icon-calendar"></i>&nbsp;
                                <span class="thin uppercase hidden-xs"></span>&nbsp;
                                <i class="fa fa-angle-down"></i>
                            </div>*@
                    </div>
                </div>
                <!-- END PAGE BAR -->

                @RenderBody()
                <div class=" " style="color:white;">
                    .
                </div>



            </div>


            <!-- END CONTENT BODY -->
        </div>


        <!-- END CONTENT -->
        <!-- BEGIN QUICK SIDEBAR -->
        <a href="javascript:;" class="page-quick-sidebar-toggler">
            <i class="icon-login"></i>
        </a>
        <div class="page-quick-sidebar-wrapper" data-close-on-body-click="false">
            <div class="page-quick-sidebar">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="javascript:;" data-target="#quick_sidebar_tab_1" data-toggle="tab">
                            Users
                            <span class="badge badge-danger">2</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;" data-target="#quick_sidebar_tab_2" data-toggle="tab">
                            Alerts
                            <span class="badge badge-success">7</span>
                        </a>
                    </li>
                    <li class="dropdown">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                            More
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            <li>
                                <a href="javascript:;" data-target="#quick_sidebar_tab_3" data-toggle="tab">
                                    <i class="icon-bell"></i> Alerts
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-target="#quick_sidebar_tab_3" data-toggle="tab">
                                    <i class="icon-info"></i> Notifications
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-target="#quick_sidebar_tab_3" data-toggle="tab">
                                    <i class="icon-speech"></i> Activities
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="javascript:;" data-target="#quick_sidebar_tab_3" data-toggle="tab">
                                    <i class="icon-settings"></i> Settings
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active page-quick-sidebar-chat" id="quick_sidebar_tab_1">
                        <div class="page-quick-sidebar-chat-users" data-rail-color="#ddd" data-wrapper-class="page-quick-sidebar-list">
                            <h3 class="list-heading">Staff</h3>

                            <h3 class="list-heading">Customers</h3>

                        </div>
                        <div class="page-quick-sidebar-item">
                            <div class="page-quick-sidebar-chat-user">
                                <div class="page-quick-sidebar-nav">
                                    <a href="javascript:;" class="page-quick-sidebar-back-to-list">
                                        <i class="icon-arrow-left"></i>Back
                                    </a>
                                </div>
                                <div class="page-quick-sidebar-chat-user-messages">

                                </div>
                                <div class="page-quick-sidebar-chat-user-form">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Type a message here...">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn green">
                                                <i class="icon-paper-clip"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane page-quick-sidebar-alerts" id="quick_sidebar_tab_2">
                        <div class="page-quick-sidebar-alerts-list">
                            <h3 class="list-heading">General</h3>

                            <h3 class="list-heading">System</h3>

                        </div>
                    </div>
                    <div class="tab-pane page-quick-sidebar-settings" id="quick_sidebar_tab_3">
                        <div class="page-quick-sidebar-settings-list">
                            <h3 class="list-heading">General Settings</h3>

                            <div class="inner-content">
                                <button class="btn btn-success">
                                    <i class="icon-settings"></i> Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END QUICK SIDEBAR -->
    </div>
    <partial name="_FooterPartial" />
    <partial name="_Confirmation" />

    @*<environment include="Development">*@
    <!-- BEGIN CORE PLUGINS -->
    <script src="~/js/CorePlugins.js"></script>

    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="~/js/LevelPlugins.js"></script>
    <script src="~/js/toaster.js"></script>
    <link href="~/css/toastr.css" rel="stylesheet" />
    @*<script type="text/javascript" src="toastrsample.js"></script>*@
    @*<link rel="stylesheet" type="text/css" href="http://codeseven.github.com/toastr/toastr-responsive.css">*@

    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="~/js/Global.js"></script>

    <!-- END THEME GLOBAL SCRIPTS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    @*<script src="~/assets/pages/scripts/dashboard.min.js" type="text/javascript"></script>*@
    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME LAYOUT SCRIPTS -->
    @*<script src="~/assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>*@
    @*<script src="~/assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>*@
    @*<script src="~/assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
        <script src="~/assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>*@
    <!-- END THEME LAYOUT SCRIPTS -->
    @*</environment>*@
    @*<environment exclude="Development">
            <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.3.1.min.js"
                    asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                    asp-fallback-test="window.jQuery"
                    crossorigin="anonymous"
                    integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT">
            </script>
            <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js"
                    asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                    asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                    crossorigin="anonymous"
                    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
            </script>
            <script src="~/js/site.min.js" asp-append-version="true"></script>
        </environment>*@
    <environment include="Development">
        <script src="~/js/validation.js"></script>

    </environment>
    <environment include="Production">

        <script src="~/js/validation.min.js"></script>
    </environment>

    <script>
        $(function () {

            var url = window.location.pathname,
                urlRegExp = new RegExp(url.replace(/\/$/, '') + "$", 'i'); // create regexp to match current url pathname and remove trailing slash if present as it could collide with the link in navigation in case trailing slash wasn't present there
            // now grab every link from the navigation
            $('a.nav-link').each(function () {
                // and test its normalized href against the url pathname regexp
                if (urlRegExp.test(this.href.replace(/\/$/, ''), 'i')) {
                    $(this).parent().addClass('active');
                }
            });

            $("li.active").parent().parent(".nav-item").addClass("open active");
            $("li.active").parent().parent().parent().parent(".nav-item").addClass("open active");

        });
    </script>

    @RenderSection("Scripts", required: false)
    <script type="text/javascript">
        $(document).ready(function () {
            $("[data-requiredconfirmation=true]").click(function () {

                var tag = '';
                var tagname = '';

                tag = this;
                tagname = $(tag).get(0).tagName.toLowerCase();
                $("#uxConfMessage").empty();
                $("#uxModalTitle").empty();
                $("#uxModalTitle").html($(tag).text());


                $(tag).closest('form').data("validator").settings.submitHandler = function (form) {
                    //alert('submit');
                    //form.submit();
                    $("#uxConfMessage").html("You are about to " + $(tag).text() + " this");
                    $("#uxGlobalConfirmation").show();

                    $("#uxModalBtnSave").click(function () {
                        if (tagname == "button") {
                            form.submit();
                        }
                        else if (tagname == "a") {
                            var actionUrl = $(tag).attr("data-url");
                            window.location = actionUrl;
                        }
                    });
                    $("button[data-dismiss='modal']").click(function () {
                        $("#uxGlobalConfirmation").hide();
                    });

                };



                //var tag = '';
                //var tagname = '';
                //$("[data-requiredconfirmation=true]").click(function () {
                //    tag = this;
                //    tagname = $(tag).get(0).tagName.toLowerCase();
                //    $("#uxConfMessage").empty();
                //    $("#uxModalTitle").empty();
                //    $("#uxModalTitle").html($(tag).text());
                //    $("#uxConfMessage").html("You are about to " + $(tag).text() + " this");
                //    $("#uxGlobalConfirmation").show();
                //});
                //$("#uxModalBtnSave").click(function () {
                //    if (tagname == "button") {
                //        $(tag).closest('form').submit();
                //    }
                //    else if (tagname == "a") {
                //        var actionUrl = $(tag).attr("data-url");
                //        window.location = actionUrl;
                //    }
                //});
                //$("button[data-dismiss='modal']").click(function () {
                //    $("#uxGlobalConfirmation").hide();
                //});

            });
        });
        $(document).ready(function () {
            if ('@TempData["message"]' != null) {
                  if('@TempData["message"]' == "Success"){
                       toastr.success('Added Successsfully!');
                      }
                  else if ('@TempData["message"]' == 'Error') {
                      toastr.error('Can Not be Processed! Please Check');
                }
                else if ('@TempData["message"]' == 'Delete') {
                      toastr.success('Delete Successsfully!');
                  }
            }

    });
    </script>

</body>
</html>